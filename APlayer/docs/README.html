<hr><h2 id=search-english><a title="search: english" class=headerlink href=#search-english></a>search: english</h2><h1 id=APlayer><a class=headerlink href=#APlayer title=APlayer></a>APlayer</h1><p>🍭 Wow, such a beautiful HTML5 music player<h2 id=Special-Sponsors><a title="Special Sponsors" class=headerlink href=#Special-Sponsors></a>Special Sponsors</h2><a href=https://www.dogecloud.com/?ref=dplayer target=_blank> <img src=https://player.dogecloud.com/img/logo_with_product3.png width=222px> </a><h2 id=Installation><a class=headerlink href=#Installation title=Installation></a>Installation</h2><p>Using npm:<pre><code>npm install aplayer --save
</code></pre><p>Using Yarn:<pre><code>yarn add aplayer
</code></pre><h2 id=Quick-Start><a title="Quick Start" class=headerlink href=#Quick-Start></a>Quick Start</h2><div class=aplayer-wrap><div id=aplayer2><button class="docute-button load">Click to load player <pre><code class=html>&LTlink rel="stylesheet" href="APlayer.min.css">
&LTdiv id="aplayer">&LT/div>
&LTscript src="APlayer.min.js">&LT/script>
</code></pre> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    audio: [{
        name: 'name',
        artist: 'artist',
        url: 'url.mp3',
        cover: 'cover.jpg'
    }]
});
</code></pre> <p>Work with module bundler:</p> <pre><code class=js>import 'aplayer/dist/APlayer.min.css';
import APlayer from 'aplayer';

const ap = new APlayer(options);
</code></pre> <h2 id=Options><a class=headerlink href=#Options title=Options></a>Options</h2><table><thead><tr><th>Name<th>Default<th>Description<tbody><tr><td>container<td>document.querySelector(‘.aplayer’)<td>player container<tr><td>fixed<td>false<td>enable fixed mode, <a href=https://aplayer.js.org/#/home?id=fixed-mode>see more details</a><tr><td>mini<td>false<td>enable mini mode, <a href=https://aplayer.js.org/#/home?id=mini-mode>see more details</a><tr><td>autoplay<td>false<td>audio autoplay<tr><td>theme<td>‘#b7daff’<td>main color<tr><td>loop<td>‘all’<td>player loop play, values: ‘all’, ‘one’, ‘none’<tr><td>order<td>‘list’<td>player play order, values: ‘list’, ‘random’<tr><td>preload<td>‘auto’<td>values: ‘none’, ‘metadata’, ‘auto’<tr><td>volume<td>0.7<td>default volume, notice that player will remember user setting, default volume will not work after user set volume themselves<tr><td>audio<td>-<td>audio info, should be an object or object array<tr><td>audio.name<td>-<td>audio name<tr><td>audio.artist<td>-<td>audio artist<tr><td>audio.url<td>-<td>audio url<tr><td>audio.cover<td>-<td>audio cover<tr><td>audio.lrc<td>-<td><a href=https://aplayer.js.org/#/home?id=lrc>see more details</a><tr><td>audio.theme<td>-<td>main color when switching to this audio, it has priority over the above theme<tr><td>audio.type<td>‘auto’<td>values: ‘auto’, ‘hls’, ‘normal’ or other custom type, <a href=https://aplayer.js.org/#/home?id=mse-support>see more details</a><tr><td>customAudioType<td>-<td><a href=https://aplayer.js.org/#/home?id=mse-support>see more details</a><tr><td>mutex<td>true<td>prevent to play multiple player at the same time, pause other players when this player start play<tr><td>lrcType<td>0<td><a href=https://aplayer.js.org/#/home?id=lrc>see more details</a><tr><td>listFolded<td>false<td>indicate whether list should folded at first<tr><td>listMaxHeight<td>-<td>list max height<tr><td>storageName<td>‘aplayer-setting’<td>localStorage key that store player setting</table> <p>For example:</p> <div class=aplayer-wrap><div id=aplayer3><button class="docute-button load">Click to load player <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('player'),
    mini: false,
    autoplay: false,
    theme: '#FADFA3',
    loop: 'all',
    order: 'random',
    preload: 'auto',
    volume: 0.7,
    mutex: true,
    listFolded: false,
    listMaxHeight: 90,
    lrcType: 3,
    audio: [
        {
            name: 'name1',
            artist: 'artist1',
            url: 'url1.mp3',
            cover: 'cover1.jpg',
            lrc: 'lrc1.lrc',
            theme: '#ebd0c2'
        },
        {
            name: 'name2',
            artist: 'artist2',
            url: 'url2.mp3',
            cover: 'cover2.jpg',
            lrc: 'lrc2.lrc',
            theme: '#46718b'
        }
    ]
});
</code></pre> <h2 id=API><a class=headerlink href=#API title=API></a>API</h2><ul><li><p><code>APlayer.version</code>: static property, return the version of APlayer</p><li><p><code>ap.play()</code>: play audio</p><li><p><code>ap.pause()</code>: pause audio</p><li><p><code>ap.seek(time: number)</code>: seek to specified time, the unit of time is second</p> <pre><code class=js>ap.seek(100);
</code></pre><li><p><code>ap.toggle()</code>: toggle between play and pause</p><li><p><code>ap.on(event: string, handler: function)</code>: bind audio and player events, <a href=https://aplayer.js.org/#/home?id=event-binding>see more details</a></p><li><p><code>ap.volume(percentage: number, nostorage: boolean)</code>: set audio volume</p> <pre><code class=js>ap.volume(0.1, true);
</code></pre><li><p><code>ap.theme(color: string, index: number)</code>: set player theme, the default of index is current audio index</p> <pre><code class=js>ap.theme('#000', 0);
</code></pre><li><p><code>ap.setMode(mode: string)</code>: set player mode, the value of mode should be ‘mini’ or ‘normal’</p><li><p><code>ap.mode</code>: return current player mode, ‘mini’ or ‘normal’</p><li><p><code>ap.notice(text: string, time: number, opacity: number)</code>: show message, the unit of time is millisecond, the default of time is 2000, the default of opacity is 0.8, setting time to 0 can disable notice autohide.</p> <pre><code class=js>ap.notice('Amazing player', 2000, 0.8);
</code></pre><li><p><code>ap.skipBack()</code>: skip to previous audio</p><li><p><code>ap.skipForward()</code>: skip to next audio</p><li><p><code>ap.destroy()</code>: destroy player</p><li><p><code>ap.lrc</code></p> <ul><li><p><code>ap.lrc.show()</code>: show lrc</p><li><p><code>ap.lrc.hide()</code>: hide lrc</p><li><p><code>ap.lrc.toggle()</code>: toggle lrc between show and hide</p></ul><li><p><code>ap.list</code></p> <ul><li><p><code>ap.list.show()</code>: show list</p><li><p><code>ap.list.hide()</code>: hide list</p><li><p><code>ap.list.toggle()</code>: toggle list between show and hide</p><li><p><code>ap.list.add(audios: array | object)</code>: add new audios to the list</p></ul> <pre><code class=js>ap.list.add([{
    name: 'name',
    artist: 'artist',
    url: 'url.mp3',
    cover: 'cover.jpg',
    lrc: 'lrc.lrc',
    theme: '#ebd0c2'
}]);
</code></pre> <ul><li><code>ap.list.remove(index: number)</code>: remove an audio from the list</ul> <pre><code class=js>ap.list.remove(1);
</code></pre> <ul><li><code>ap.list.switch()</code>: switch to an audio in the list</ul> <pre><code class=js>ap.list.switch(1);
</code></pre> <ul><li><code>ap.list.clear()</code>: remove all audios from the list</ul><li><p><code>ap.audio</code>: native audio</p><li><p><code>ap.audio.currentTime</code>: returns the current playback position</p><li><p><code>ap.audio.duration</code>: returns audio total time</p><li><p><code>ap.audio.paused</code>: returns whether the audio paused</p><li><p>most <a href=http://www.w3schools.com/tags/ref_av_dom.asp>native api</a> are supported</p></ul> <h2 id=Event-binding><a title="Event binding" class=headerlink href=#Event-binding></a>Event binding</h2><p><code>ap.on(event, handler)</code></p> <pre><code class=js>ap.on('ended', function () {
    console.log('player ended');
});
</code></pre> <p>Audio events</p> <ul><li>abort<li>canplay<li>canplaythrough<li>durationchange<li>emptied<li>ended<li>error<li>loadeddata<li>loadedmetadata<li>loadstart<li>mozaudioavailable<li>pause<li>play<li>playing<li>progress<li>ratechange<li>seeked<li>seeking<li>stalled<li>suspend<li>timeupdate<li>volumechange<li>waiting</ul> <p>Player events</p> <ul><li>listshow<li>listhide<li>listadd<li>listremove<li>listswitch<li>listclear<li>noticeshow<li>noticehide<li>destroy<li>lrcshow<li>lrchide</ul> <h2 id=LRC><a class=headerlink href=#LRC title=LRC></a>LRC</h2><p>We have three ways to pass LRC to APlayer, indicate the way to pass LRC by option <code>lrcType</code>, then put lrc to option <code>audio.lrc</code> or HTML.</p> <div class=aplayer-wrap><div id=aplayer4><button class="docute-button load">Click to load player <h3 id=LRC-file><a title="LRC file" class=headerlink href=#LRC-file></a>LRC file</h3><p>The first way, put LRC to a LRC file, LRC file will be loaded when this audio start to play.</p> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    lrcType: 3,
    audio: {
        name: 'name',
        artist: 'artist',
        url: 'demo.mp3',
        cover: 'demo.jpg',
        lrc: 'lrc.lrc'
    }
});
</code></pre> <h3 id=LRC-string-in-JS><a title="LRC string in JS" class=headerlink href=#LRC-string-in-JS></a>LRC string in JS</h3><p>The second way, put LRC to a JS string.</p> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    lrcType: 1,
    audio: {
        name: 'name',
        artist: 'artist',
        url: 'demo.mp3',
        cover: 'demo.jpg',
        lrc: '[00:00.00]APlayer\n[00:04.01]is\n[00:08.02]amazing'
    }
});
</code></pre> <h3 id=LRC-in-HTML><a title="LRC in HTML" class=headerlink href=#LRC-in-HTML></a>LRC in HTML</h3><p>The third way, put LRC to HTML.</p> <pre><code class=html>&LTlink rel="stylesheet" href="APlayer.min.css">
&LTdiv id="player">
    &LTpre class="aplayer-lrc-content">
        [00:00.00]APlayer audio1
        [00:04.01]is
        [00:08.02]amazing
        &LT!-- ... -->
    &LT/pre>
    &LTpre class="aplayer-lrc-content">
        [00:00.00]APlayer audio2
        [00:04.01]is
        [00:08.02]amazing
        &LT!-- ... -->
    &LT/pre>
&LT/div>
&LTscript src="APlayer.min.js">&LT/script>
</code></pre> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    lrcType: 2,
    audio: [[
        {
            name: 'name1',
            artist: 'artist1',
            url: 'url1.mp3',
            cover: 'cover1.jpg'
        },
        {
            name: 'name2',
            artist: 'artist2',
            url: 'url2.mp3',
            cover: 'cover2.jpg'
        }
    ]]
});
</code></pre> <h3 id=LRC-format><a title="LRC format" class=headerlink href=#LRC-format></a>LRC format</h3><p>The following LRC format are supported:</p> <p><code>[mm:ss]APlayer</code></p> <p><code>[mm:ss.xx]is</code></p> <p><code>[mm:ss.xxx]amazing</code></p> <p><code>[mm:ss.xx][mm:ss.xx]APlayer</code></p> <p><code>[mm:ss.xx]&LTmm:ss.xx>is</code></p> <p><code>[mm:ss.xx]amazing[mm:ss.xx]APlayer</code></p> <h2 id=Playlist><a class=headerlink href=#Playlist title=Playlist></a>Playlist</h2><p>APlayer will show a playlist when it has more than one audio, option <code>listFolded</code> indicates whether list should folded at first, and option <code>listMaxHeight</code> indicates list max height.</p> <div class=aplayer-wrap><div id=aplayer5><button class="docute-button load">Click to load player <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('player'),
    listFolded: false,
    listMaxHeight: 90,
    lrcType: 3,
    audio: [
        {
            name: 'name1',
            artist: 'artist1',
            url: 'url1.mp3',
            cover: 'cover1.jpg',
            lrc: 'lrc1.lrc',
            theme: '#ebd0c2'
        },
        {
            name: 'name2',
            artist: 'artist2',
            url: 'url2.mp3',
            cover: 'cover2.jpg',
            lrc: 'lrc2.lrc',
            theme: '#46718b'
        }
    ]
});
</code></pre> <h2 id=Fixed-mode><a title="Fixed mode" class=headerlink href=#Fixed-mode></a>Fixed mode</h2><p>APlayer can be fixed to page bottom via fixed mode, fixed mode is a very different mode, enjoy it!</p> <div class=aplayer-wrap><div id=aplayer9><button class="docute-button load">Click to load player <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('player'),
    fixed: true,
    audio: [{
        name: 'name',
        artist: 'artist',
        url: 'url.mp3',
        cover: 'cover.jpg',
    }]
});
</code></pre> <h2 id=Mini-mode><a title="Mini mode" class=headerlink href=#Mini-mode></a>Mini mode</h2><p>If you don’t have enough space for normal player, mini mode might be your choice.</p> <p>Please note that mini mode is conflicted with fixed mode.</p> <div class=aplayer-wrap><div id=aplayer6><button class="docute-button load">Click to load player <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('player'),
    mini: true,
    audio: [{
        name: 'name',
        artist: 'artist',
        url: 'url.mp3',
        cover: 'cover.jpg',
    }]
});
</code></pre> <h2 id=MSE-support><a title="MSE support" class=headerlink href=#MSE-support></a>MSE support</h2><h3 id=HLS><a class=headerlink href=#HLS title=HLS></a>HLS</h3><p>It requires the library <a href=https://github.com/video-dev/hls.js>hls.js</a> and it should be loaded before <code>APlayer.min.js</code>.</p> <div class=aplayer-wrap><div id=aplayer7><button class="docute-button load">Click to load player <pre><code class=html>&LTlink rel="stylesheet" href="APlayer.min.css">
&LTdiv id="aplayer">&LT/div>
&LTscript src="hls.min.js">&LT/script>
&LTscript src="APlayer.min.js">&LT/script>
</code></pre> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    audio: [{
        name: 'HLS',
        artist: 'artist',
        url: 'url.m3u8',
        cover: 'cover.jpg',
        type: 'hls'
    }]
});
</code></pre> <pre><code class=js>// another way, use customType
const ap = new APlayer({
    container: document.getElementById('aplayer'),
    audio: [{
        name: 'HLS',
        artist: 'artist',
        url: 'url.m3u8',
        cover: 'cover.jpg',
        type: 'customHls'
    }],
    customAudioType: {
        'customHls': function (audioElement, audio, player) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(audio.url);
                hls.attachMedia(audioElement);
            }
            else if (audioElement.canPlayType('application/x-mpegURL') || audioElement.canPlayType('application/vnd.apple.mpegURL')) {
                audioElement.src = audio.url;
            }
            else {
                player.notice('Error: HLS is not supported.');
            }
        }
    }
});
</code></pre> <h2 id=Self-adapting-theme-according-to-cover><a title="Self-adapting theme according to cover" class=headerlink href=#Self-adapting-theme-according-to-cover></a>Self-adapting theme according to cover</h2><p>It requires the library <a href=https://github.com/lokesh/color-thief/blob/master/src/color-thief.js>color-thief</a>.</p> <div class=aplayer-wrap><div id=aplayer8><button class="docute-button load">Click to load player <pre><code class=html>&LTlink rel="stylesheet" href="APlayer.min.css">
&LTdiv id="aplayer">&LT/div>
&LTscript src="APlayer.min.js">&LT/script>
&LTscript src="color-thief.js">&LT/script>
</code></pre> <pre><code class=js>const ap = new APlayer({
    container: document.getElementById('aplayer'),
    theme: '#e9e9e9',
    audio: [{
        name: 'name1',
        artist: 'artist1',
        url: 'url1.mp3',
        cover: 'cover1.jpg'
    }, {
        name: 'name2',
        artist: 'artist2',
        url: 'url2.mp3',
        cover: 'cover2.jpg'
    }]
});

const colorThief = new ColorThief();
const image = new Image();
const xhr = new XMLHttpRequest();
const setTheme = (index) => {
    if (!ap.list.audios[index].theme) {
        xhr.onload = function(){
            let coverUrl = URL.createObjectURL(this.response);
            image.onload = function(){
                let color = colorThief.getColor(image);
                ap.theme(`rgb(${color[0]}, ${color[1]}, ${color[2]})`, index);
                URL.revokeObjectURL(coverUrl)
            };
            image.src = coverUrl;
        }
        xhr.open('GET', ap.list.audios[index].cover, true);
        xhr.responseType = 'blob';
        xhr.send();
    }
};
setTheme(ap.list.index);
ap.on('listswitch', (index) => {
    setTheme(index);
});
</code></pre> <h2 id=CDN><a class=headerlink href=#CDN title=CDN></a>CDN</h2><ul><li><a href=https://www.jsdelivr.com/package/npm/aplayer>jsDelivr</a><li><a href=https://cdnjs.com/libraries/aplayer>cdnjs</a><li><a href=https://unpkg.com/aplayer/>unpkg</a></ul> <h2 id=FAQ><a class=headerlink href=#FAQ title=FAQ></a>FAQ</h2><h3 id=Why-can’t-player-autoplay-in-some-mobile-browsers><a title="Why can’t player autoplay in some mobile browsers?" class=headerlink href=#Why-can’t-player-autoplay-in-some-mobile-browsers></a>Why can’t player autoplay in some mobile browsers?</h3><p>Most mobile browsers forbid audio autoplay, you wont be able to achieve it without hacks.</p>